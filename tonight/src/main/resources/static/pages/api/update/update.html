<template>
    <div class="box-card" style="margin-left: 20px">
        <div>
            <el-form ref="form" :model="form" label-width="80px" :label-position="labelPosition" style="width: 1000px">
                <el-collapse :value="defaultOpen">
                    <el-collapse-item title="api基本信息" :name="1">
                        <el-form-item label="所属应用">
                            <el-col :span="8">
                                <el-select v-model="form.classes" placeholder="请选择" style="width: 273px">
                                    <el-option
                                            v-for="item in options"
                                            :key="item.value"
                                            :label="item.label"
                                            :value="item.value">
                                    </el-option>
                                </el-select>
                            </el-col>
                            <el-col class="line" :span="4" style="text-align: right">所属类别&nbsp;&nbsp;&nbsp;</el-col>
                            <el-col :span="8">
                                <el-input v-model="form.secondClass" placeholder="请输入所属类别"></el-input>
                            </el-col>
                        </el-form-item>

                        <el-form-item label="名称">
                            <el-col :span="8">
                                <el-input v-model="form.name" placeholder="请输入名称"></el-input>
                            </el-col>
                            <el-col class="line" :span="4" style="text-align: right">url&nbsp;&nbsp;&nbsp;</el-col>
                            <el-col :span="8">
                                <el-input v-model="form.url" placeholder="请输入url"></el-input>
                            </el-col>
                        </el-form-item>

                        <el-form-item label="类名">
                            <el-col :span="8">
                                <el-input v-model="form.className" placeholder="请输入类名"></el-input>
                            </el-col>
                            <el-col class="line" :span="4" style="text-align: right">方法名&nbsp;&nbsp;&nbsp;</el-col>
                            <el-col :span="8">
                                <el-input v-model="form.methodName" placeholder="请输入方法名"></el-input>
                            </el-col>
                        </el-form-item>

                        <el-form-item label="请求类型">
                            <el-col :span="8">
                                <el-select v-model="form.restType" placeholder="请选择请求类型" style="width: 273px">
                                    <el-option label="POST" value="post"></el-option>
                                    <el-option label="GET" value="get"></el-option>
                                </el-select>
                            </el-col>
                            <el-col class="line" :span="4" style="text-align: right">参数格式&nbsp;&nbsp;&nbsp;</el-col>
                            <el-col :span="8">
                                                              <el-select v-model="form.paramType" placeholder="请选择请求参数格式" style="width: 273px">
                                                                    <el-option label="json" value="json"></el-option>
                                                                    <el-option label="form" value="form"></el-option>
                                                                </el-select>
<!--                                <el-input
                                        placeholder="请输入内容"
                                        v-model="form.paramType"
                                        :disabled="true">
                                </el-input>-->
                            </el-col>
                        </el-form-item>

                        <el-form-item label="责任人">
                            <el-col :span="8">
                                <el-input v-model="form.person" placeholder="请输入责任人"></el-input>
                            </el-col>
                            <el-col class="line" :span="4" style="text-align: right">描述&nbsp;&nbsp;&nbsp;</el-col>
                            <el-col :span="8">
                                <el-input type="textarea" v-model="form.describe" placeholder="请输入描述"></el-input>
                            </el-col>
                        </el-form-item>
                    </el-collapse-item>
                    <el-collapse-item title="输入参数" :name="2">
                        <el-tabs v-model="activeName">
                            <el-tab-pane label="普通参数" name="first">
                                <el-table
                                        :data="inputParam"
                                        size="mini"
                                        stripe
                                        :row-style="rowStyle"
                                        width="100%"
                                >
                                    <el-table-column type="expand">
                                        <template slot-scope="props">
                                            <el-table
                                                    :data="inputParam[props.$index].subordinate"
                                                    size="mini"
                                                    :show-header="false"
                                                    stripe
                                            >
                                                <el-table-column type="expand">
                                                    <template slot-scope="propsIN">
                                                        <el-table
                                                                :data="propsIN.row.subordinate"
                                                                size="mini"
                                                                :show-header="false"
                                                                stripe
                                                        >
                                                            <el-table-column label="名称" width="180">
                                                                <template slot-scope="scope">
                                                                    <el-input v-model="scope.row.paramName" size="small"
                                                                              placeholder="请输入参数名称"></el-input>
                                                                </template>
                                                            </el-table-column>
                                                            <!--<el-table-column label="属性">
                                                                <template slot-scope="scope">
                                                                    <el-input v-model="scope.row.paramProperty"  size="small"
                                                                              placeholder="请输入参数属性"></el-input>
                                                                </template>
                                                            </el-table-column>-->
                                                            <el-table-column label="参数类型" width="160px">
                                                                <template slot-scope="scope">
                                                                    <el-select v-model="scope.row.paramType"
                                                                               size="small"
                                                                               placeholder="请选择参数类型">
                                                                        <el-option label="Number"
                                                                                   value="Number"></el-option>
                                                                        <el-option label="String"
                                                                                   value="String"></el-option>
                                                                        <el-option label="Array(Base)"
                                                                                   value="Array(Base)"></el-option>
                                                                    </el-select>
                                                                </template>
                                                            </el-table-column>
                                                            <el-table-column label="备注" width="300px">
                                                                <template slot-scope="scope">
                                                                    <el-input type="textarea"
                                                                              v-model="scope.row.paramMessage"
                                                                              size="small"
                                                                              :rows="1"

                                                                              placeholder="请输入参数备注"></el-input>
                                                                </template>
                                                            </el-table-column>
                                                            <el-table-column label="操作" width="100px">
                                                                <template slot-scope="scope">
                                                                    <el-button type="primary"
                                                                               icon="el-icon-circle-plus-outline"
                                                                               size="small"
                                                                               circle
                                                                               @click.native.prevent="addTableRowButton(scope.store.states.data)"></el-button>
                                                                    <el-button type="danger" icon="el-icon-delete"
                                                                               circle
                                                                               size="small"
                                                                               @click.native.prevent="deleteTableRowButton(scope.row,scope.store.states.data)"></el-button>
                                                                </template>
                                                            </el-table-column>
                                                        </el-table>
                                                    </template>
                                                </el-table-column>
                                                <el-table-column label="名称" width="180px">
                                                    <template slot-scope="scope">
                                                        <el-input v-model="scope.row.paramName" size="small"
                                                                  placeholder="请输入参数名称"></el-input>
                                                    </template>
                                                </el-table-column>
                                                <!--<el-table-column label="属性">
                                                    <template slot-scope="scope">
                                                        <el-input v-model="scope.row.paramProperty"  size="small"
                                                                  placeholder="请输入参数属性"></el-input>
                                                    </template>
                                                </el-table-column>-->
                                                <el-table-column label="参数类型" width="160px">
                                                    <template slot-scope="scope">
                                                        <el-select v-model="scope.row.paramType" size="small"
                                                                   placeholder="请选择参数类型">
                                                            <el-option label="Number" value="Number"></el-option>
                                                            <el-option label="String" value="String"></el-option>
                                                            <el-option label="Object" value="Object"></el-option>
                                                            <el-option label="Array(Base)"
                                                                       value="Array(Base)"></el-option>
                                                            <el-option label="Array(Object)" value="Array(Object)"></el-option>
                                                        </el-select>
                                                    </template>
                                                </el-table-column>
                                                <el-table-column label="备注" width="300px">
                                                    <template slot-scope="scope">
                                                        <el-input type="textarea" v-model="scope.row.paramMessage"
                                                                  size="small"
                                                                  :rows="1"

                                                                  placeholder="请输入参数备注"></el-input>
                                                    </template>
                                                </el-table-column>
                                                <el-table-column label="操作">
                                                    <template slot-scope="scope">
                                                        <el-button type="primary" icon="el-icon-circle-plus-outline"
                                                                   size="small"
                                                                   circle
                                                                   @click.native.prevent="addTableRowButton(scope.store.states.data)"></el-button>

                                                        <el-button type="danger" icon="el-icon-delete" circle
                                                                   size="small"
                                                                   @click.native.prevent="deleteTableRowButton(scope.row,scope.store.states.data)"></el-button>
                                                    </template>
                                                </el-table-column>
                                            </el-table>
                                        </template>
                                    </el-table-column>
                                    <el-table-column label="名称" width="220px">
                                        <template slot-scope="scope">
                                            <el-input v-model="scope.row.paramName" placeholder="请输入参数名称"></el-input>
                                        </template>
                                    </el-table-column>
                                    <!--<el-table-column label="属性">
                                        <template slot-scope="scope">
                                            <el-input v-model="scope.row.paramProperty"
                                                      placeholder="请输入参数属性"></el-input>
                                        </template>
                                    </el-table-column>-->
                                    <el-table-column label="参数类型" width="160px">
                                        <template slot-scope="scope">
                                            <el-select v-model="scope.row.paramType" placeholder="请选择参数类型">
                                                <el-option label="Number" value="Number"></el-option>
                                                <el-option label="String" value="String"></el-option>
                                                <el-option label="Object" value="Object"></el-option>
                                                <el-option label="Array(Base)" value="Array(Base)"></el-option>
                                                <el-option label="Array(Object)" value="Array(Object)"></el-option>
                                            </el-select>
                                        </template>
                                    </el-table-column>
                                    <el-table-column label="备注" width="330px">
                                        <template slot-scope="scope">
                                            <el-input type="textarea" v-model="scope.row.paramMessage" :rows="1"
                                                      placeholder="请输入参数备注"></el-input>
                                        </template>
                                    </el-table-column>
                                    <el-table-column label="操作">
                                        <template slot-scope="scope">
                                            <el-button type="primary" icon="el-icon-circle-plus-outline"
                                                       circle
                                                       @click.native.prevent="addTableRowButton(scope.store.states.data)"></el-button>
                                            <el-button type="danger" icon="el-icon-delete" circle
                                                       @click.native.prevent="deleteTableRowButton(scope.row,scope.store.states.data)"></el-button>
                                        </template>
                                    </el-table-column>
                                </el-table>
                                <el-button type="success" style="margin-left: 380px;margin-top: 10px"
                                           @click="inputConfirm">确认修改以上参数
                                </el-button>
                            </el-tab-pane>

                            <el-tab-pane label="json参数" name="second">

                                <el-tooltip placement="top">
                                    <div slot="content">
                                        存储json格式：<br/>
                                        [<br/>
                                        {"paramType":"Number","index":1,"paramName":"输入参数1","paramProperty":"parameter1","paramMessage":"添加输入参数1"},<br/>
                                        {"paramType":"String","index":1,"paramName":"输入参数2","paramProperty":"parameter2","paramMessage":"添加输入参数2"},<br/>
                                        ...<br/>
                                        ]<br/>
                                    </div>
                                    <el-input
                                            type="textarea"
                                            :rows="8"
                                            placeholder="请输入内容"
                                            v-model="form.inputParam"
                                    >
                                    </el-input>
                                </el-tooltip>

                            </el-tab-pane>
                        </el-tabs>

                    </el-collapse-item>
                    <el-collapse-item title="输出参数" :name="3">
                        <el-tabs v-model="activeName2">
                            <el-tab-pane label="普通参数" name="first">
                                <el-table
                                        :data="outputParam"
                                        size="mini"
                                        stripe
                                        :row-style="rowStyle"
                                        width="100%"
                                >
                                    <el-table-column type="expand">
                                        <template slot-scope="props">
                                            <el-table
                                                    :data="outputParam[props.$index].subordinate"
                                                    size="mini"
                                                    :show-header="false"
                                                    stripe
                                            >
                                                <el-table-column type="expand">
                                                    <template slot-scope="propsOUT">
                                                        <el-table
                                                                :data="propsOUT.row.subordinate"
                                                                size="mini"
                                                                :show-header="false"
                                                                stripe
                                                        >
                                                            <el-table-column label="名称" width="180">
                                                                <template slot-scope="scope">
                                                                    <el-input v-model="scope.row.paramName" size="small"
                                                                              placeholder="请输入参数名称"></el-input>
                                                                </template>
                                                            </el-table-column>
                                                            <!--<el-table-column label="属性">
                                                                <template slot-scope="scope">
                                                                    <el-input v-model="scope.row.paramProperty"  size="small"
                                                                              placeholder="请输入参数属性"></el-input>
                                                                </template>
                                                            </el-table-column>-->
                                                            <el-table-column label="参数类型" width="160px">
                                                                <template slot-scope="scope">
                                                                    <el-select v-model="scope.row.paramType"
                                                                               size="small"
                                                                               placeholder="请选择参数类型">
                                                                        <el-option label="Number"
                                                                                   value="Number"></el-option>
                                                                        <el-option label="String"
                                                                                   value="String"></el-option>
                                                                        <el-option label="Object"
                                                                                   value="Object"></el-option>
                                                                        <el-option label="Array(Base)"
                                                                                   value="Array(Base)"></el-option>
                                                                        <el-option label="Array(Object)"
                                                                                   value="Array(Object)"></el-option>
                                                                    </el-select>
                                                                </template>
                                                            </el-table-column>
                                                            <el-table-column label="备注" width="300px">
                                                                <template slot-scope="scope">
                                                                    <el-input type="textarea"
                                                                              v-model="scope.row.paramMessage"
                                                                              size="small"
                                                                              :rows="1"

                                                                              placeholder="请输入参数备注"></el-input>
                                                                </template>
                                                            </el-table-column>
                                                            <el-table-column label="操作" width="100px">
                                                                <template slot-scope="scope">
                                                                    <el-button type="primary"
                                                                               icon="el-icon-circle-plus-outline"
                                                                               size="small"
                                                                               circle
                                                                               @click.native.prevent="addTableRowButton(scope.store.states.data)"></el-button>
                                                                    <el-button type="danger" icon="el-icon-delete"
                                                                               circle
                                                                               size="small"
                                                                               @click.native.prevent="deleteTableRowButton(scope.row,scope.store.states.data)"></el-button>
                                                                </template>
                                                            </el-table-column>
                                                        </el-table>
                                                    </template>
                                                </el-table-column>
                                                <el-table-column label="名称" width="180px">
                                                    <template slot-scope="scope">
                                                        <el-input v-model="scope.row.paramName" size="small"
                                                                  placeholder="请输入参数名称"></el-input>
                                                    </template>
                                                </el-table-column>
                                                <!--<el-table-column label="属性">
                                                    <template slot-scope="scope">
                                                        <el-input v-model="scope.row.paramProperty"  size="small"
                                                                  placeholder="请输入参数属性"></el-input>
                                                    </template>
                                                </el-table-column>-->
                                                <el-table-column label="参数类型" width="160px">
                                                    <template slot-scope="scope">
                                                        <el-select v-model="scope.row.paramType" size="small"
                                                                   placeholder="请选择参数类型">
                                                            <el-option label="Number" value="Number"></el-option>
                                                            <el-option label="String" value="String"></el-option>
                                                            <el-option label="Object" value="Object"></el-option>
                                                            <el-option label="Array(Base)"
                                                                       value="Array(Base)"></el-option>
                                                            <el-option label="Array(Object)"
                                                                       value="Array(Object)"></el-option>
                                                        </el-select>
                                                    </template>
                                                </el-table-column>
                                                <el-table-column label="备注" width="300px">
                                                    <template slot-scope="scope">
                                                        <el-input type="textarea" v-model="scope.row.paramMessage"
                                                                  size="small"
                                                                  :rows="1"

                                                                  placeholder="请输入参数备注"></el-input>
                                                    </template>
                                                </el-table-column>
                                                <el-table-column label="操作">
                                                    <template slot-scope="scope">
                                                        <el-button type="primary" icon="el-icon-circle-plus-outline"
                                                                   size="small"
                                                                   circle
                                                                   @click.native.prevent="addTableRowButton(scope.store.states.data)"></el-button>

                                                        <el-button type="danger" icon="el-icon-delete" circle
                                                                   size="small"
                                                                   @click.native.prevent="deleteTableRowButton(scope.row,scope.store.states.data)"></el-button>
                                                    </template>
                                                </el-table-column>
                                            </el-table>
                                        </template>
                                    </el-table-column>
                                    <el-table-column label="名称" width="220px">
                                        <template slot-scope="scope">
                                            <el-input v-model="scope.row.paramName" placeholder="请输入参数名称"></el-input>
                                        </template>
                                    </el-table-column>
                                    <!--<el-table-column label="属性">
                                        <template slot-scope="scope">
                                            <el-input v-model="scope.row.paramProperty"
                                                      placeholder="请输入参数属性"></el-input>
                                        </template>
                                    </el-table-column>-->
                                    <el-table-column label="参数类型" width="160px">
                                        <template slot-scope="scope">
                                            <el-select v-model="scope.row.paramType" placeholder="请选择参数类型">
                                                <el-option label="Number" value="Number"></el-option>
                                                <el-option label="String" value="String"></el-option>
                                                <el-option label="Object" value="Object"></el-option>
                                                <el-option label="Array(Base)" value="Array(Base)"></el-option>
                                                <el-option label="Array(Object)" value="Array(Object)"></el-option>
                                            </el-select>
                                        </template>
                                    </el-table-column>
                                    <el-table-column label="备注" width="330px">
                                        <template slot-scope="scope">
                                            <el-input type="textarea" v-model="scope.row.paramMessage" :rows="1"
                                                      placeholder="请输入参数备注"></el-input>
                                        </template>
                                    </el-table-column>
                                    <el-table-column label="操作">
                                        <template slot-scope="scope">
                                            <el-button type="primary" icon="el-icon-circle-plus-outline"
                                                       circle
                                                       @click.native.prevent="addTableRowButton(scope.store.states.data)"></el-button>
                                            <el-button type="danger" icon="el-icon-delete" circle
                                                       @click.native.prevent="deleteTableRowButton(scope.row,scope.store.states.data)"></el-button>
                                        </template>
                                    </el-table-column>
                                </el-table>
                                <el-button type="success" style="margin-left: 380px;margin-top: 10px"
                                           @click="outputConfirm">确认修改以上参数
                                </el-button>
                            </el-tab-pane>

                            <el-tab-pane label="json参数" name="second">
                                <el-tooltip placement="top">
                                    <div slot="content">
                                        存储json格式：<br/>
                                        [<br/>
                                        {"paramType":"Number","index":1,"paramName":"输出参数1","paramProperty":"parameter1","paramMessage":"添加输出参数1"},<br/>
                                        {"paramType":"String","index":1,"paramName":"输出参数2","paramProperty":"parameter2","paramMessage":"添加输出参数2"},<br/>
                                        ...<br/>
                                        ]<br/>
                                    </div>
                                    <el-input
                                            type="textarea"
                                            :rows="8"
                                            placeholder="请输入内容"
                                            v-model="form.outputParam"
                                    >
                                    </el-input>
                                </el-tooltip>
                            </el-tab-pane>
                        </el-tabs>

                    </el-collapse-item>
                </el-collapse>
                <el-form-item style="margin-top: 20px;margin-left: 300px">
                    <el-button type="primary" @click="onSubmit">立即修改</el-button>
                    <el-button @click="cancel">取 消</el-button>
                </el-form-item>
            </el-form>
        </div>
    </div>
</template>
<script type="text/javascript" src="pages/api/update/update.js"></script>