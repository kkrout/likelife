<title>基础功能配置</title>
<template>
    <div>
        <el-table  size="mini" ref="table" :data="tableData" stripe highlight-current-row height="100%" @cell-click="cellClick" >
            <el-table-column type="index" width="50"></el-table-column>
            <el-table-column type="selection" width="55"></el-table-column>
            <el-table-column property="displayName"  label="显示名称" min-width="120" >
                <template slot-scope="scope" >
                    <el-input v-if="editColumn && scope.column.id == editColumn.id "
                              v-model="scope.row.displayName" autofocus  v-clickotherside="handerOutSide" ></el-input>
                    <span v-else v-text="scope.row.displayName"></span>
                </template>
            </el-table-column>
            <el-table-column property="type" label="类型" min-width="120">
                <template slot-scope="scope" >
                    <el-select ref="tabSelect" v-if="editColumn && scope.column.id == editColumn.id " v-model="scope.row.type"
                               placeholder="请选择类型" @change="handlerTypeSelect(scope,$event)" >
                        <el-option value="string" label="字符串类型"></el-option>
                        <el-option value="number" label="数字类型"></el-option>
                        <el-option value="bool" label="布尔类型" ></el-option>
                    </el-select>
                    <span v-else v-text="scope.row.typeName"></span>
                </template>
            </el-table-column>
            <el-table-column property="len" label="长度" >
                <template slot-scope="scope" >
                    <el-input-number :min="0"  v-if="editColumn && scope.column.id == editColumn.id "
                              v-model="scope.row.len" autofocus  v-clickotherside="handerOutSide" ></el-input-number>
                    <span v-else v-text="scope.row.len"></span>
                </template>
            </el-table-column>
            <el-table-column property="defaultValue" label="默认值">
                <template slot-scope="scope" >
                    <el-input v-if="editColumn && scope.column.id == editColumn.id "
                              v-model="scope.row.defaultValue" autofocus  v-clickotherside="handerOutSide" ></el-input>
                    <span v-else v-text="scope.row.defaultValue"></span>
                </template>
            </el-table-column>
            <el-table-column property="remark" label="备注">
                <template slot-scope="scope" >
                    <el-input v-if="editColumn && scope.column.id == editColumn.id "
                              v-model="scope.row.remark" autofocus  v-clickotherside="handerOutSide" ></el-input>
                    <span v-else v-text="scope.row.remark"></span>
                </template>
            </el-table-column>
            <el-table-column property="auto" label="自动生成">
                <template slot-scope="scope" >
                    <el-select ref="tabSelect" v-if="editColumn && scope.column.id == editColumn.id " v-model="scope.row.auto"
                               placeholder="请选择类型" @change="handlerAutoSelect(scope,$event)" >
                        <el-option value="increment" label="自增"></el-option>
                        <el-option value="uuid" label="UUID"></el-option>
                    </el-select>
                    <span v-else v-text="scope.row.autoName"></span>
                </template>
            </el-table-column>
            <el-table-column label="操作" width="150">
                <template slot-scope="scope">
                    <el-button-group>
                        <el-button size="mini" type="primary" icon="el-icon-edit" @click=""></el-button>
                        <el-button size="mini" type="danger" icon="el-icon-delete" @click="" ></el-button>
                    </el-button-group>
                </template>
            </el-table-column>
        </el-table>
    </div>
</template>
<script>
    App.moule({
        data :function() {
            return {
                tableData: [{
                    filed: 'filed',
                    displayName: '显示名称',
                    type: 'number',
                    typeName:"数字类型",
                    len:10,
                    defaultValue:"",
                    remark:"",
                    auto:"",
                    autoName:""
                }],
                editColumn:null
            }
        },
        methods:{
            handerOutSide(){
                console.log(111)
                this.editColumn = null
            },
            cellClick(row, column, cell, event){
                if ( this.editColumn == column) return;
                this.editColumn = column;
            },
            handlerAutoSelect(scope,v){
                this.$nextTick(()=>{
                    this.$set(scope.row,'autoName',this.$refs.tabSelect.selectedLabel)
                    this.handerOutSide()
                })
            },
            handlerTypeSelect(scope,v){
                this.$nextTick(()=>{
                    this.$set(scope.row,'typeName',this.$refs.tabSelect.selectedLabel)
                    this.handerOutSide()
                })
            }
        }
    });
</script>